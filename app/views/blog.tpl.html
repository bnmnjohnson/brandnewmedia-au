<top-panel message="labs" class="contact"> </top-panel>
<div class="filter-bar">
    <div class="wider-main">
        <div class="row no-pad">
            <ul class="lab-controls">
                <form ng-submit="vm.search(term)" name="searchForm" ng-hide="vm.subtitle">
                    <input type="search" ng-model="vm.searchTerm" ng-blur="searchInputBlur()" class="labs-search" placeholder="Search our labs...">
                    <!-- <button type="submit" ng-submit="vm.search()"> Submit </button> -->
                </form>
                 <p class="search-subtitle">{{ vm.subtitle }}</p>
            </ul>
        </div>
    </div>
</div>
<div class="row no-pad">
    <div class="medium-12 columns">
       
    </div>
</div>

<div id="loading-bg" class="loading-bg" ng-show="vm.loadingPosts">
    <div class="loading-spinner"></div>
</div>
<div class="labs-main">
    <ul id="container" masonry="{ transitionDuration: '0' }" preserve-order class="row small-up-1 large-up-2 no-pad">
        <li class="masonry-brick column no-pad post" ng-repeat="post in vm.posts track by $index" prepend="vm.isPrepended()">
            <a ng-href="/labs/{{post.ID}}/{{post.slug}}" class="post-list-title">
                <img ng-src="{{post.featured_image.source}}">
            </a>
            <div class="post-list-entry">
                <!-- <div class="date">
                    {{ post.date | date:'dd MMM yyyy' }}&nbsp; by&nbsp;
                    <a ng-href="/author/{{post.author.name}}">{{post.author.name}}</a>
                </div> -->
                <a class="h2" ng-href="/labs/{{post.ID}}/{{post.slug}}">{{ post.title | decodeHtmlCodes }} </a>
                <div class="post-list-excerpt" ng-bind-html="post.excerpt"></div>
                <ul class="tags">
                    <li class="tag" ng-repeat="tag in post.terms.post_tag">
                        <a ng-href="/tag/{{tag.slug}}">#{{ tag.name }} </a>
                    </li>
                </ul>
            </div>
        </li>
        <div id="loading-more" class="loading-more" ng-show="vm.loadingMore">
            <div class="loading-spinner"></div>
        </div>
    </ul>
</div>
<div class="row">
    <button class="h2 more-btn" ng-class="vm.nextPageDisabledClass()" ng-click="vm.loadMore()">More from the labs</button>
</div>
<div ng-include=" 'footer.html' "> </div>
<style>
</style>
<script>
// $(function() {

//     $('.more-btn').click(function() {
//         console.log("imclicked");
//          $("#loading-bg").fadeIn("fast");
//         var $container = $('#container');
//         $container.imagesLoaded(function() {
//             console.log("blog posts loaded");
//             $("#loading-bg").delay(1000).fadeOut("slow");
//         });
//     });

// });

$(function() {
    $(window).load(function() {

        $(".masonry-brick").addClass("masonry-visible");
        // $("#loading-bg").delay(1000).fadeOut("slow");

    });
});
</script>
